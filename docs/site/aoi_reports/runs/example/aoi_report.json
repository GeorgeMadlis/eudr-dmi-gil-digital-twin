{
  "acceptance_criteria": [
    {
      "criteria_id": "aoi_geometry_present",
      "decision_type": "presence",
      "description": "AOI geometry is present and referenced in inputs.",
      "evidence_classes": [
        "aoi_geometry"
      ]
    },
    {
      "criteria_id": "forest_loss_post_2020_max_ha",
      "decision_type": "threshold",
      "description": "Forest loss post-2020 must be <= 0 ha.",
      "evidence_classes": [
        "forest_loss_post_2020"
      ]
    }
  ],
  "aoi_geometry_ref": {
    "kind": "geojson",
    "sha256": "22ad6fe53d54f93b3d2f5894c9722b944ebd005734435308c2f14020e76bc28b",
    "value": "inputs/aoi.geojson"
  },
  "aoi_id": "estonia_testland1",
  "assumptions": [],
  "bundle_id": "example",
  "computed": {
    "forest_loss_post_2020": {
      "mask_forest_current_year": "reports/aoi_report_v2/estonia_testland1/hansen/forest_current_tree_cover_mask.geojson",
      "mask_forest_loss_post_2020": "reports/aoi_report_v2/estonia_testland1/hansen/forest_loss_post_2020_mask.geojson",
      "pixel_current_tree_cover_ha": 0.0,
      "pixel_forest_loss_post_2020_ha": 0.0,
      "pixel_initial_tree_cover_ha": 0.0,
      "tiles_manifest": "reports/aoi_report_v2/estonia_testland1/hansen/forest_loss_post_2020_tiles.json"
    }
  },
  "computed_outputs": {
    "forest_loss_post_2020": {
      "area_ha": 0.0,
      "mask_geojson_ref": {
        "content_type": "application/geo+json",
        "relpath": "reports/aoi_report_v2/estonia_testland1/hansen/forest_loss_post_2020_mask.geojson",
        "sha256": "6d6b80a88dc60e65991d34024fe7cf2eb86531ffba8b75efb697fe0a601f2799"
      },
      "pixel_size_m": 30,
      "tiles_manifest_ref": {
        "content_type": "application/json",
        "relpath": "reports/aoi_report_v2/estonia_testland1/hansen/forest_loss_post_2020_tiles.json",
        "sha256": "1de9484ea06ab46fd1bb372820245d21e97de828f0841da24a01e2c3f2e25fbf"
      }
    }
  },
  "datasets": [
    {
      "dataset_id": "aoi_geometry_input",
      "license": "user_supplied",
      "retrieved_at_utc": "2026-02-08T12:12:53+00:00",
      "source_url": "inputs/aoi.geojson",
      "version": "user_supplied"
    },
    {
      "dataset_id": "hansen_gfc_2024_v1_12",
      "license": "Hansen GFC (public)",
      "retrieved_at_utc": "2026-02-08T12:12:53+00:00",
      "source_url": "https://storage.googleapis.com/earthenginepartners-hansen/GFC-2024-v1.12/",
      "version": "2024-v1.12"
    }
  ],
  "evidence_artifacts": [
    {
      "content_type": "application/geo+json",
      "meta": {
        "role": "aoi_geometry"
      },
      "relpath": "inputs/aoi.geojson",
      "sha256": "22ad6fe53d54f93b3d2f5894c9722b944ebd005734435308c2f14020e76bc28b",
      "size_bytes": 355
    },
    {
      "content_type": "text/html",
      "meta": {
        "role": "report_html"
      },
      "relpath": "reports/aoi_report_v2/estonia_testland1.html",
      "sha256": "1051e1ffad7cc896261a10a70c17fcd7d7e62e9920b9c0254564050a73541969",
      "size_bytes": 7568
    },
    {
      "content_type": "application/json",
      "meta": {
        "role": "report_json"
      },
      "relpath": "reports/aoi_report_v2/estonia_testland1.json",
      "sha256": "4b8b79114c1719de9809af5219450dbe11fc1712f2077a6b21eb0c2ddb5068b3",
      "size_bytes": 20098
    },
    {
      "content_type": "application/geo+json",
      "meta": {
        "role": "forest_current_mask"
      },
      "relpath": "reports/aoi_report_v2/estonia_testland1/hansen/forest_current_tree_cover_mask.geojson",
      "sha256": "6d6b80a88dc60e65991d34024fe7cf2eb86531ffba8b75efb697fe0a601f2799",
      "size_bytes": 43
    },
    {
      "content_type": "application/geo+json",
      "meta": {
        "role": "forest_loss_mask"
      },
      "relpath": "reports/aoi_report_v2/estonia_testland1/hansen/forest_loss_post_2020_mask.geojson",
      "sha256": "6d6b80a88dc60e65991d34024fe7cf2eb86531ffba8b75efb697fe0a601f2799",
      "size_bytes": 43
    },
    {
      "content_type": "application/json",
      "meta": {
        "role": "forest_loss_summary"
      },
      "relpath": "reports/aoi_report_v2/estonia_testland1/hansen/forest_loss_post_2020_summary.json",
      "sha256": "f04b929814f592625cdc2f6cfdeb87d1303e93596d958af1db85048a0fb440ab",
      "size_bytes": 566
    },
    {
      "content_type": "application/json",
      "meta": {
        "role": "hansen_tiles_manifest"
      },
      "relpath": "reports/aoi_report_v2/estonia_testland1/hansen/forest_loss_post_2020_tiles.json",
      "sha256": "1de9484ea06ab46fd1bb372820245d21e97de828f0841da24a01e2c3f2e25fbf",
      "size_bytes": 1154
    },
    {
      "content_type": "text/csv",
      "meta": {
        "role": "maaamet_crosscheck_csv"
      },
      "relpath": "reports/aoi_report_v2/estonia_testland1/maaamet/maaamet_forest_area_crosscheck.csv",
      "sha256": "caa14b64eb9738a3dc9610966dd7bbc76821986ca5bcf1aa4bdadd44c5e9f41c",
      "size_bytes": 129
    },
    {
      "content_type": "application/json",
      "relpath": "reports/aoi_report_v2/estonia_testland1/maaamet/maaamet_forest_area_crosscheck.json",
      "sha256": "16b1495b00e01dda094b2cd6cc6cb5a425d3ea418e2bc9b4de17c0a029dd7514",
      "size_bytes": 337
    },
    {
      "content_type": "text/csv",
      "meta": {
        "role": "metrics_csv"
      },
      "relpath": "reports/aoi_report_v2/estonia_testland1/metrics.csv",
      "sha256": "6353594a462d797886d463e5be61fd4632063e82e968e15d638daf6a1dee6354",
      "size_bytes": 700
    }
  ],
  "evidence_registry": {
    "evidence_classes": [
      {
        "class_id": "aoi_geometry",
        "mandatory": true,
        "status": "present"
      },
      {
        "class_id": "forest_loss_post_2020",
        "mandatory": true,
        "status": "present"
      },
      {
        "class_id": "hansen_tiles_provenance",
        "mandatory": true,
        "status": "present"
      }
    ]
  },
  "extensions": {
    "forest_metrics_artifacts": {
      "debug_ref": "forest_metrics_debug.json",
      "params_ref": "forest_metrics_params.json"
    },
    "forest_metrics_debug": {
      "areas_ha": {
        "forest_2024": 0.0,
        "forest_end_year": 0.0,
        "forest_end_year_ha": 0.0,
        "loss_2021_2024": 0.0,
        "loss_total": 0.0,
        "loss_total_2001_2024": 0.0,
        "rfm": 0.0
      },
      "mask_true_pixels": {
        "forest_end_year": 0,
        "loss_21_24": 0,
        "rfm": 0
      },
      "pixel_area_m2": {
        "max": 0.0,
        "mean": 0.0,
        "min": 0.0
      },
      "raster_shapes": [
        [
          1,
          1
        ]
      ]
    },
    "forest_metrics_params": {
      "area_method": "pipeline_a_raster_zonal_geodesic_wgs84",
      "canopy_threshold_pct": 30,
      "crs": "EPSG:4326",
      "end_year": 2024,
      "loss_year_code_basis": 2000,
      "lossyear_mapping": "0=no_loss; 21..24=2021..2024 (year=lossyear+2000)",
      "method": {
        "area": "geodesic_pixel_area_wgs84",
        "notes": "area_ha = sum(pixel_area_m2 * mask * zone_mask)/10000",
        "zonal": "rasterize_polygon_all_touched"
      },
      "start_year": 2001
    },
    "metrics_rows_v1": [
      {
        "notes": "geodesic_wgs84_pyproj",
        "source": "geometry",
        "unit": "ha",
        "value": 15775.219873859023,
        "variable": "aoi_area_ha"
      },
      {
        "notes": "forest_end_year",
        "source": "hansen_gfc",
        "unit": "year",
        "value": 2024,
        "variable": "end_year"
      },
      {
        "notes": "rfm_mask & (lossyear == 0)",
        "source": "hansen_gfc",
        "unit": "ha",
        "value": 0.0,
        "variable": "forest_2024_ha"
      },
      {
        "notes": "forest_mask_end_year",
        "source": "hansen_gfc",
        "unit": "ha",
        "value": 0.0,
        "variable": "forest_end_year_ha"
      },
      {
        "notes": "forest_loss_post_2020_ha / aoi_area_ha",
        "source": "hansen_gfc",
        "unit": "percent",
        "value": 0.0,
        "variable": "forest_loss_post_2020_percent_of_aoi"
      },
      {
        "notes": "rfm_mask & (lossyear in 21..24)",
        "source": "hansen_gfc",
        "unit": "ha",
        "value": 0.0,
        "variable": "loss_2021_2024_ha"
      },
      {
        "notes": "rfm_mask & (lossyear > 0)",
        "source": "hansen_gfc",
        "unit": "ha",
        "value": 0.0,
        "variable": "loss_total_ha"
      },
      {
        "notes": "pixel_mask",
        "source": "hansen_gfc",
        "unit": "ha",
        "value": 0.0,
        "variable": "pixel_current_tree_cover_ha"
      },
      {
        "notes": "pixel_mask",
        "source": "hansen_gfc",
        "unit": "ha",
        "value": 0.0,
        "variable": "pixel_forest_loss_post_2020_ha"
      },
      {
        "notes": "pixel_mask",
        "source": "hansen_gfc",
        "unit": "ha",
        "value": 0.0,
        "variable": "pixel_initial_tree_cover_ha"
      },
      {
        "notes": "rfm_mask",
        "source": "hansen_gfc",
        "unit": "ha",
        "value": 0.0,
        "variable": "rfm_area_ha"
      }
    ]
  },
  "external_dependencies": [
    {
      "aoi_geojson_sha256": "22ad6fe53d54f93b3d2f5894c9722b944ebd005734435308c2f14020e76bc28b",
      "dataset_version": "2024-v1.12",
      "dependency_id": "hansen_gfc_2024_v1_12",
      "tile_source": "local",
      "tiles_manifest": {
        "relpath": "reports/aoi_report_v2/estonia_testland1/hansen/forest_loss_post_2020_tiles.json",
        "sha256": "1de9484ea06ab46fd1bb372820245d21e97de828f0841da24a01e2c3f2e25fbf"
      },
      "tiles_used": [
        {
          "layer": "lossyear",
          "local_path": "/Users/server/data/eudr-dmi/hansen/hansen_gfc_2024_v1_12/tiles/N50_E020/lossyear.tif",
          "sha256": "067302ee9c03b49e4c2dd295a13b4244ec9431a1771b2d2bb889a3b1a81556c1",
          "size_bytes": 36017634,
          "source_url": "https://storage.googleapis.com/earthenginepartners-hansen/GFC-2024-v1.12/Hansen_GFC-2024-v1.12_lossyear_50N_020E.tif",
          "tile_id": "N50_E020"
        },
        {
          "layer": "treecover2000",
          "local_path": "/Users/server/data/eudr-dmi/hansen/hansen_gfc_2024_v1_12/tiles/N50_E020/treecover2000.tif",
          "sha256": "8c3e73f13967e168120e3baa7ed7d9223684f798d393933fe6e7b429d89f5fbd",
          "size_bytes": 406010213,
          "source_url": "https://storage.googleapis.com/earthenginepartners-hansen/GFC-2024-v1.12/Hansen_GFC-2024-v1.12_treecover2000_50N_020E.tif",
          "tile_id": "N50_E020"
        }
      ]
    }
  ],
  "forest_metrics": {
    "canopy_threshold_pct": 30,
    "end_year": 2024,
    "forest_end_year_area_ha": 0.0,
    "inputs": {
      "hansen_lossyear": {
        "hash": "1de9484ea06ab46fd1bb372820245d21e97de828f0841da24a01e2c3f2e25fbf",
        "source": "hansen_gfc_2024_v1_12",
        "tile_refs": [
          {
            "layer": "lossyear",
            "local_path": "/Users/server/data/eudr-dmi/hansen/hansen_gfc_2024_v1_12/tiles/N50_E020/lossyear.tif",
            "sha256": "067302ee9c03b49e4c2dd295a13b4244ec9431a1771b2d2bb889a3b1a81556c1",
            "size_bytes": 36017634,
            "source_url": "https://storage.googleapis.com/earthenginepartners-hansen/GFC-2024-v1.12/Hansen_GFC-2024-v1.12_lossyear_50N_020E.tif",
            "tile_id": "N50_E020"
          }
        ],
        "tiles_manifest_ref": {
          "relpath": "reports/aoi_report_v2/estonia_testland1/hansen/forest_loss_post_2020_tiles.json",
          "sha256": "1de9484ea06ab46fd1bb372820245d21e97de828f0841da24a01e2c3f2e25fbf"
        }
      },
      "hansen_treecover2000": {
        "hash": "1de9484ea06ab46fd1bb372820245d21e97de828f0841da24a01e2c3f2e25fbf",
        "source": "hansen_gfc_2024_v1_12",
        "tile_refs": [
          {
            "layer": "treecover2000",
            "local_path": "/Users/server/data/eudr-dmi/hansen/hansen_gfc_2024_v1_12/tiles/N50_E020/treecover2000.tif",
            "sha256": "8c3e73f13967e168120e3baa7ed7d9223684f798d393933fe6e7b429d89f5fbd",
            "size_bytes": 406010213,
            "source_url": "https://storage.googleapis.com/earthenginepartners-hansen/GFC-2024-v1.12/Hansen_GFC-2024-v1.12_treecover2000_50N_020E.tif",
            "tile_id": "N50_E020"
          }
        ],
        "tiles_manifest_ref": {
          "relpath": "reports/aoi_report_v2/estonia_testland1/hansen/forest_loss_post_2020_tiles.json",
          "sha256": "1de9484ea06ab46fd1bb372820245d21e97de828f0841da24a01e2c3f2e25fbf"
        }
      }
    },
    "loss_2021_2024_ha": 0.0,
    "loss_2021_2024_pct_of_rfm": 0.0,
    "loss_total_2001_2024_ha": 0.0,
    "loss_year_code_basis": 2000,
    "method": {
      "area": "geodesic_pixel_area_wgs84",
      "notes": "area_ha = sum(pixel_area_m2 * mask * zone_mask)/10000",
      "zonal": "rasterize_polygon_all_touched"
    },
    "reference_forest_mask_year": 2000,
    "rfm_area_ha": 0.0
  },
  "generated_at_utc": "2026-02-08T12:12:53+00:00",
  "inputs": {
    "sources": [
      {
        "content_type": "application/geo+json",
        "sha256": "22ad6fe53d54f93b3d2f5894c9722b944ebd005734435308c2f14020e76bc28b",
        "source_id": "aoi_geometry",
        "uri": "inputs/aoi.geojson"
      }
    ]
  },
  "methodology": {
    "forest_loss_post_2020": {
      "calculation": {
        "area_units": "ha",
        "cutoff_date": "2020-12-31",
        "method": "pixel_wise_intersection"
      },
      "data_sources": [
        "hansen_global_forest_change"
      ],
      "dataset_version": "2024-v1.12",
      "forest_definition": {
        "tree_cover_threshold_percent": 30
      },
      "is_placeholder": false,
      "resolution": {
        "pixel_size_m": 30
      },
      "tile_source": "local",
      "tile_source_url_template": "https://storage.googleapis.com/earthenginepartners-hansen/GFC-2024-v1.12/Hansen_GFC-2024-v1.12_{layer}_{url_tile_id}.tif"
    }
  },
  "metrics": {
    "aoi_area_ha": {
      "notes": "geodesic_wgs84_pyproj",
      "unit": "ha",
      "value": 15775.219873859023
    },
    "end_year": {
      "notes": "forest_end_year",
      "unit": "year",
      "value": 2024
    },
    "forest_2024_ha": {
      "notes": "rfm_mask & (lossyear == 0)",
      "unit": "ha",
      "value": 0.0
    },
    "forest_end_year_ha": {
      "notes": "forest_mask_end_year",
      "unit": "ha",
      "value": 0.0
    },
    "forest_loss_post_2020_percent_of_aoi": {
      "notes": "forest_loss_post_2020_ha / aoi_area_ha",
      "unit": "percent",
      "value": 0.0
    },
    "loss_2021_2024_ha": {
      "notes": "rfm_mask & (lossyear in 21..24)",
      "unit": "ha",
      "value": 0.0
    },
    "loss_total_ha": {
      "notes": "rfm_mask & (lossyear > 0)",
      "unit": "ha",
      "value": 0.0
    },
    "pixel_current_tree_cover_ha": {
      "notes": "pixel_mask",
      "unit": "ha",
      "value": 0.0
    },
    "pixel_forest_loss_post_2020_ha": {
      "notes": "pixel_mask",
      "unit": "ha",
      "value": 0.0
    },
    "pixel_initial_tree_cover_ha": {
      "notes": "pixel_mask",
      "unit": "ha",
      "value": 0.0
    },
    "rfm_area_ha": {
      "notes": "rfm_mask",
      "unit": "ha",
      "value": 0.0
    }
  },
  "parameters": {
    "aoi_area_method": "geodesic_wgs84_pyproj",
    "forest_loss_post_2020": {
      "acceptance_threshold_ha": 0.0,
      "area_method": "pipeline_a_raster_zonal_geodesic_wgs84",
      "canopy_threshold_percent": 30,
      "cutoff_year": 2020,
      "end_year": 2024,
      "forest_end_year_ha": 0.0,
      "lossyear_mapping": "0=no_loss; 21..24=2021..2024 (year=lossyear+2000)",
      "mask_definitions": {
        "forest_2024": "rfm_mask & (lossyear == 0)",
        "loss_2021_2024": "rfm_mask & (lossyear in 21..24)",
        "loss_total": "rfm_mask & (lossyear > 0)",
        "rfm_mask": "treecover2000 >= canopy_threshold_percent"
      },
      "pixel_area_method": "geodesic_wgs84_pyproj"
    },
    "implementation": {
      "forest_loss_post_2020": "v1",
      "git_commit": "d0f7543e1d97f78c9918859f800b314e7f34b06a"
    }
  },
  "policy_mapping": [
    {
      "article_ref": "EUDR Article 9",
      "artifact_relpaths": [
        "inputs/aoi.geojson"
      ],
      "evidence_fields": [
        "aoi_geometry_ref",
        "inputs.sources"
      ],
      "requirement": "AOI geometry is declared and traceable",
      "status": "pass"
    },
    {
      "article_ref": "EUDR Article 3",
      "artifact_relpaths": [
        "reports/aoi_report_v2/estonia_testland1/hansen/forest_loss_post_2020_mask.geojson",
        "reports/aoi_report_v2/estonia_testland1/hansen/forest_loss_post_2020_tiles.json"
      ],
      "evidence_fields": [
        "results_summary.deforestation_free_post_2020",
        "computed.forest_loss_post_2020.pixel_forest_loss_post_2020_ha"
      ],
      "requirement": "Deforestation-free after 2020-12-31",
      "status": "pass"
    }
  ],
  "policy_mapping_refs": [
    "policy-spine:eudr/article-3",
    "policy-spine:eudr/article-9"
  ],
  "regulatory_traceability": [
    {
      "acceptance_criteria": "aoi_geometry_present",
      "article_ref": "article-3",
      "evidence_class": "aoi_geometry",
      "regulation": "EUDR",
      "result_ref": "result-001"
    },
    {
      "acceptance_criteria": "forest_loss_post_2020_max_ha",
      "article_ref": "article-3",
      "evidence_class": "forest_loss_post_2020",
      "regulation": "EUDR",
      "result_ref": "forest_loss_post_2020_max_ha"
    }
  ],
  "report_metadata": {
    "assessment_capability": "inspectable_only",
    "regulatory_context": {
      "in_scope_articles": [
        "article-3"
      ],
      "out_of_scope_articles": [],
      "regulation": "EUDR"
    },
    "report_type": "example"
  },
  "report_version": "aoi_report_v2",
  "results": [
    {
      "criteria_ids": [
        "aoi_geometry_present"
      ],
      "result_id": "result-001",
      "status": "pass"
    },
    {
      "criteria_ids": [
        "forest_loss_post_2020_max_ha"
      ],
      "evidence_classes": [
        "forest_loss_post_2020"
      ],
      "observed_value": 0.0,
      "result_id": "forest_loss_post_2020_max_ha",
      "status": "pass",
      "threshold_value": 0.0,
      "unit": "ha"
    }
  ],
  "results_summary": {
    "aoi_area": {
      "area_ha": 15775.219873859023,
      "method": "geodesic_wgs84_pyproj"
    },
    "deforestation_free_post_2020": {
      "forest_loss_post_2020_ha": 0.0,
      "percent_of_aoi": 0.0,
      "status": "pass",
      "threshold_ha": 0.0,
      "uncertainty": {
        "conservative_bounds": "area estimates are lower-bound for masked/no-data pixels",
        "nodata": "masked_as_no_loss",
        "pixel_area_method": "geodesic_wgs84_pyproj",
        "projection": "EPSG:4326"
      }
    }
  },
  "validation": {
    "forest_area_crosscheck": {
      "comparison": {
        "diff_pct": null,
        "tolerance_percent": 5.0
      },
      "computed": {
        "forest_area_ha": 0.0
      },
      "csv_ref": {
        "content_type": "text/csv",
        "relpath": "reports/aoi_report_v2/estonia_testland1/maaamet/maaamet_forest_area_crosscheck.csv",
        "sha256": "caa14b64eb9738a3dc9610966dd7bbc76821986ca5bcf1aa4bdadd44c5e9f41c"
      },
      "fields_used": [
        "forest_area_ha"
      ],
      "outcome": "not_comparable",
      "reason": "missing_reference_forest_area",
      "reference": {
        "method": "missing",
        "source": "missing",
        "value_ha": null
      },
      "source": "maaamet",
      "summary_ref": {
        "content_type": "application/json",
        "relpath": "reports/aoi_report_v2/estonia_testland1/maaamet/maaamet_forest_area_crosscheck.json",
        "sha256": "16b1495b00e01dda094b2cd6cc6cb5a425d3ea418e2bc9b4de17c0a029dd7514"
      }
    },
    "maaamet": {
      "cadastral_forest_ha_sum": null,
      "enabled": false,
      "notes": "Populate when Maa-amet WFS integration is enabled in pipeline.",
      "parcel_count": null,
      "parcel_layer": "kataster:ky_kehtiv",
      "pixel_forest_ha_sum": null,
      "rel_diff_pct": null
    }
  }
}
